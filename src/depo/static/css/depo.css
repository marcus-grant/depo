/* src/depo/static/css/depo.css */

:root:not([data-theme=dark]), [data-theme=light] {
  /* Pico overrides — Palette A (Classic Retro) */
  --pico-background-color: rgb(245, 245, 245);
  --pico-color: rgb(32, 32, 32);
  --pico-muted-color: rgb(110, 110, 110);
  --pico-border-radius: 0;

  --pico-primary: rgb(70, 110, 160);
  --pico-primary-background: rgb(70, 110, 160);
  --pico-primary-border: rgb(70, 110, 160);
  --pico-primary-hover: rgb(55, 95, 140);
  --pico-primary-hover-background: rgb(55, 95, 140);
  --pico-primary-hover-border: rgb(55, 95, 140);
  --pico-primary-focus: rgba(70, 110, 160, 0.25);

  --pico-font-family-monospace: var(--depo-font-mono);
  --pico-font-weight: 500;
}

:root {
  /* Depo semantic roles — Palette A (more traditional) */
  --depo-success: rgb(90, 145, 95);
  --depo-attention: rgb(200, 185, 90);
  --depo-attention-pause: rgb(200, 140, 60);
  --depo-error: rgb(165, 60, 55);
  --depo-secondary: var(--pico-muted-color);
  --depo-focus: var(--pico-primary);

  /* Depo structure */
  --depo-bg: var(--pico-background-color);
  --depo-text: var(--pico-color);
  --depo-border: rgb(200, 200, 200);


  /* Typography */
  --depo-font-mono: ui-monospace, 'SFMono-Regular', 'Cascadia Code', 'Source Code Pro', monospace;
  --depo-size-heading: 1.5rem;
  --depo-size-body: 1rem;
  --depo-size-meta: 0.8125rem;
  --depo-weight-heading: bold;
  --depo-weight-meta: 600;

 /* Dither pattern utility classes
 *
 * Apply to any element for a tiled bitmap fill.
 *   background-image  → which pattern (from --depo-dither-* vars)
 *   background-size   → pixel size of each tile; larger = chunkier dots.
 *                        Must be a multiple of the SVG grid dimensions
 *                        (8px for 4x4 patterns, 6/8/12px for 2x2).
 *   image-rendering   → pixelated keeps hard edges at all zoom/DPI*/
  --depo-dither-diag: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='4' height='4'><rect width='4' height='4' fill='rgb(230,230,230)'/><rect x='0' y='0' width='1' height='1' fill='rgb(200,200,200)'/><rect x='1' y='1' width='1' height='1' fill='rgb(200,200,200)'/><rect x='2' y='2' width='1' height='1' fill='rgb(200,200,200)'/><rect x='3' y='3' width='1' height='1' fill='rgb(200,200,200)'/></svg>");
  --depo-dither-check: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='2' height='2'><rect width='2' height='2' fill='rgb(230,230,230)'/><rect x='0' y='0' width='1' height='1' fill='rgb(200,200,200)'/><rect x='1' y='1' width='1' height='1' fill='rgb(200,200,200)'/></svg>");
  --depo-dither-cross: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='4' height='4'><rect width='4' height='4' fill='rgb(230,230,230)'/><rect x='0' y='0' width='1' height='1' fill='rgb(200,200,200)'/><rect x='2' y='2' width='1' height='1' fill='rgb(200,200,200)'/><rect x='3' y='1' width='1' height='1' fill='rgb(200,200,200)'/><rect x='1' y='3' width='1' height='1' fill='rgb(200,200,200)'/></svg>");
  --depo-dither-hstripe: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='2' height='2'><rect width='2' height='2' fill='rgb(230,230,230)'/><rect width='2' height='1' fill='rgb(200,200,200)'/></svg>");

  /* Titelbar custom properties */
  --depo-titlebar-height: 3rem;
  --depo-titlebar-inset: 0.15;
}

/* Dither pattern utility classes */
.dither-diag {
  background-image: var(--depo-dither-diag);
  background-repeat: repeat;
  background-size: 8px 8px;
  image-rendering: pixelated;
}
.dither-check {
  background-image: var(--depo-dither-check);
  background-repeat: repeat;
  background-size: 8px 8px;
  image-rendering: pixelated;
}
.dither-cross {
  background-image: var(--depo-dither-cross);
  background-repeat: repeat;
  background-size: 8px 8px;
  image-rendering: pixelated;
}

body {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}
main {
  flex: 1;
  position: relative;
  z-index: 0;
  background: rgb(230, 230, 230);
  padding: 2rem 1rem;
}


/* Typography — headings */
h1, h2, h3, h4, h5, h6 {
  font-family: var(--depo-font-mono);
  font-weight: var(--depo-weight-heading);
}
h1, h2 {
  font-size: var(--depo-size-heading);
}
h3, h4, h5, h6 {
  font-size: var(--depo-size-body);
}

/* Typography — shortcodes and references */
.shortcode {
  font-family: var(--depo-font-mono);
  font-weight: bold;
}

/* Typography — metadata */
.meta {
  font-size: var(--depo-size-meta);
  font-weight: var(--depo-weight-meta);
  font-family: var(--depo-font-mono);
  color: var(--depo-secondary);
}

/* Typography - input elements monospace */
input, select, textarea {
  font-family: var(--depo-font-mono);
}


/* TUI borders */
.tui-border {
  border: 2px solid var(--depo-border);
}
.tui-border-heavy {
  border: 4px solid var(--depo-border);
}

/* Hard-edge dither shadows
 *
 * Creates a contained rectangle behind the element using ::after.
 *   position: relative + z-index: 0  → establishes stacking context so
 *     the pseudo-element sits behind the parent content, not behind
 *     the page background
 *   width/height: 100%  → shadow is same size as the element
 *   top/left             → offset amount; controls how far the shadow
 *                          peeks out (bottom-right direction)
 *   background-image     → dither pattern fill (checkerboard by default)
 *   background-size      → must match the pattern's utility class size
 *   border               → outlines the shadow rectangle so it doesn't
 *                          dissolve into whitespace
 *   z-index: -1          → sits behind parent content (works because
 *                          parent has z-index: 0 stacking context)
 */
.shadow-sm,
.shadow-md {
  position: relative;
}
.shadow-sm::after,
.shadow-md::after {
  content: '';
  position: absolute;
  width: 100%;
  height: 100%;
  background-image: var(--depo-dither-check);
  background-repeat: repeat;
  background-size: 8px 8px;
  background-position: 2px 3px;
  background-origin: border-box;
  image-rendering: pixelated;
  border: 2px solid var(--depo-border);
  z-index: -1;
}
.shadow-sm::after {
  top:  12px;
  left: 12px;
}
.shadow-md::after {
  top: 20px;
  left: 20px;
}

/* Custom element classes */
.titlebar {
  display: flex;
  justify-content: flex-start;  /* wordmark left, future nav items follow */
  align-items: stretch;         /* children fill full bar height */
  height: 4rem;                 /* fixed bar height; label stretches to fill */
  padding: 0.44rem 1rem 0.20rem;  /* top right bottom gaps between label and backing nav*/
  overflow: hidden;             /* clip label if it overflows bar bounds */
  background: var(--depo-dither-hstripe) repeat;
  background-size: 4px 4px;    /* stripe thickness; larger = chunkier lines */
  image-rendering: pixelated;  /* crisp 1-bit stripes at all DPI */
}
.titlebar-label {
  display: flex;
  align-items: center;          /* vertically center text within stretched label */
  background: rgb(230,230,230); /* matches stripe ground color for seamless punchout */
  padding: 0 0.5rem;            /* horizontal breathing room around text */
  text-decoration: none;           /* remove default link underline */
}

footer.site-footer {
  background: rgb(200, 200, 200);
  padding: 1rem 0;
  text-align: center;
  background-size: 8px 8px;
  image-rendering: pixelated;
}
.footer .meta {
  display: inline-block;
  background: rgb(230,230,230);
  padding: 0.25rem 0.75rem;
}

.window {
  position: relative;
  border: 2px solid var(--depo-border);
  padding: 1rem;
  margin: 1.5rem;
  background: var(--depo-bg);
}
.window-controls {
  display: flex;
  gap: 0.5rem;
  align-items: center;
  margin-top: 0.5rem;
}
